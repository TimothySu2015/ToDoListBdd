Feature: 任務篩選
  As a 生產力使用者
  I want to 根據狀態篩選任務
  So that 我可以專注於相關的任務

  Background:
    Given 系統中有以下任務：
      | 描述        | 狀態  |
      | 開發新功能   | 待辦  |
      | 測試功能     | 待辦  |
      | 部署到生產   | 已完成 |
      | 撰寫文件     | 已完成 |

  Scenario: 取得所有待辦任務
    When 我請求狀態為 "todo" 的任務
    Then 回應應該包含 2 個任務
    And 回應應該包含任務 "開發新功能"
    And 回應應該包含任務 "測試功能"
    And 回應不應該包含任務 "部署到生產"
    And 回應不應該包含任務 "撰寫文件"

  Scenario: 取得所有已完成任務
    When 我請求狀態為 "completed" 的任務
    Then 回應應該包含 2 個任務
    And 回應應該包含任務 "部署到生產"
    And 回應應該包含任務 "撰寫文件"
    And 回應不應該包含任務 "開發新功能"
    And 回應不應該包含任務 "測試功能"

  Scenario: 取得所有任務（無篩選）
    When 我請求狀態為 "all" 的任務
    Then 回應應該包含 4 個任務
    And 回應應該包含任務 "開發新功能"
    And 回應應該包含任務 "測試功能"
    And 回應應該包含任務 "部署到生產"
    And 回應應該包含任務 "撰寫文件"

  Scenario: 取得所有任務（無狀態參數）
    When 我請求任務而不指定狀態
    Then 回應應該包含 4 個任務
    And 回應應該包含任務 "開發新功能"
    And 回應應該包含任務 "測試功能"
    And 回應應該包含任務 "部署到生產"
    And 回應應該包含任務 "撰寫文件"

  Scenario: 處理無效的狀態參數
    When 我請求狀態為 "invalid" 的任務
    Then 回應應該包含 4 個任務
    And 回應應該包含所有任務

  Scenario: 處理空的任務列表
    Given 系統中沒有任務
    When 我請求狀態為 "todo" 的任務
    Then 回應應該包含 0 個任務
    And 回應應該是空的任務列表