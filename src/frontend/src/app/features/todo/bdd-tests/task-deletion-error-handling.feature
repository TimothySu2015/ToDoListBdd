# language: zh-TW
功能: 任務刪除錯誤處理
  身為 生產力使用者
  我想要 在刪除任務失敗時得到清楚的錯誤訊息和恢復機制
  以便 我能夠理解問題並採取適當的行動

  場景: 網路連接錯誤
    假設 我有一個任務 "網路測試任務"
    而且 網路連接中斷
    當 我嘗試刪除任務
    而且 我確認刪除操作
    那麼 應該顯示錯誤 Toast "刪除任務「網路測試任務」時發生錯誤：網路連接失敗"
    而且 任務應該保持在列表中
    而且 任務狀態應該恢復正常
    而且 錯誤 Toast 應該顯示 6 秒
    而且 錯誤 Toast 應該是紅色樣式

  場景: 伺服器內部錯誤
    假設 我有一個任務 "伺服器錯誤測試"
    而且 伺服器回傳 500 內部錯誤
    當 我嘗試刪除任務
    而且 我確認刪除操作
    那麼 應該顯示錯誤 Toast "刪除任務「伺服器錯誤測試」時發生錯誤：伺服器內部錯誤"
    而且 任務應該從刪除狀態回滾到正常狀態
    而且 樂觀更新應該被取消

  場景: 任務不存在錯誤 (404)
    假設 我有一個任務 "已刪除任務"
    而且 該任務已經被其他用戶刪除
    當 我嘗試刪除任務
    而且 我確認刪除操作
    而且 伺服器回傳 404 找不到任務
    那麼 應該顯示錯誤 Toast "找不到要刪除的任務，可能已被刪除"
    而且 任務應該從列表中移除
    而且 任務計數應該更新

  場景: 權限不足錯誤 (403)
    假設 我有一個任務 "權限測試任務"
    而且 我沒有刪除權限
    當 我嘗試刪除任務
    而且 我確認刪除操作
    而且 伺服器回傳 403 權限不足
    那麼 應該顯示錯誤 Toast "沒有權限刪除此任務"
    而且 任務應該保持在列表中
    而且 任務狀態應該恢復正常

  場景: 請求逾時錯誤
    假設 我有一個任務 "逾時測試任務"
    而且 API 請求超過 30 秒未回應
    當 我嘗試刪除任務
    而且 我確認刪除操作
    那麼 應該顯示錯誤 Toast "刪除任務逾時，請檢查網路連接後重試"
    而且 任務應該從載入狀態恢復正常
    而且 應該提供重試選項

  場景: 多次刪除錯誤處理
    假設 我有多個任務
    而且 網路連接不穩定
    當 我快速刪除多個任務
    而且 部分刪除操作失敗
    那麼 應該針對每個失敗的任務顯示個別錯誤 Toast
    而且 成功刪除的任務應該正常移除
    而且 失敗的任務應該保留在列表中
    而且 所有錯誤 Toast 應該可以獨立關閉

  場景: 刪除過程中的其他錯誤
    假設 我有一個任務 "未知錯誤測試"
    而且 系統發生未預期的錯誤
    當 我嘗試刪除任務
    而且 我確認刪除操作
    那麼 應該顯示通用錯誤 Toast "刪除任務時發生未知錯誤，請稍後重試"
    而且 錯誤應該被記錄到控制台
    而且 任務狀態應該回滾

  場景: 錯誤後的重試機制
    假設 我剛經歷了一次刪除失敗
    而且 錯誤 Toast 正在顯示
    當 我點擊 Toast 中的 "重試" 按鈕
    那麼 應該重新嘗試刪除操作
    而且 錯誤 Toast 應該消失
    而且 任務應該進入刪除狀態

  場景: 錯誤狀態的視覺指示
    假設 我有一個任務正在刪除
    而且 刪除操作失敗了
    當 系統進行錯誤回滾
    那麼 任務項目應該有短暫的錯誤高亮效果
    而且 任務項目應該輕微震動 0.5 秒
    而且 任務應該從淡化狀態恢復到正常透明度
    而且 所有刪除中的視覺指示器都應該移除

  場景: 錯誤訊息本地化
    假設 系統語言設定為繁體中文
    當 發生各種類型的刪除錯誤
    那麼 所有錯誤訊息都應該使用繁體中文顯示
    而且 錯誤訊息應該清楚易懂
    而且 錯誤訊息應該提供建議的解決方案

  場景: 錯誤日誌記錄
    假設 我嘗試刪除一個任務
    而且 刪除操作失敗
    當 錯誤發生時
    那麼 應該在瀏覽器控制台記錄詳細錯誤資訊
    而且 錯誤日誌應該包含任務 ID 和描述
    而且 錯誤日誌應該包含錯誤類型和時間戳
    而且 錯誤日誌應該包含請求的詳細資訊

  場景: 錯誤恢復後的狀態一致性
    假設 我有一個任務刪除失敗
    而且 系統已經進行了錯誤回滾
    當 我重新檢查任務狀態
    那麼 任務應該完全恢復到刪除前的狀態
    而且 任務計數應該正確
    而且 任務在列表中的位置應該不變
    而且 任務的所有屬性都應該保持一致