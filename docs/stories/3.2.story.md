# Story 3.2: æœå°‹å’Œç¯©é¸ä»»å‹™åŠŸèƒ½

## Status

Draft

## Story

**As a** ç”Ÿç”¢åŠ›ä½¿ç”¨è€…ï¼Œ
**I want** å¿«é€Ÿæœå°‹å’Œç¯©é¸æˆ‘çš„ä»»å‹™ï¼Œ
**so that** æˆ‘å¯ä»¥é«˜æ•ˆåœ°æ‰¾åˆ°ç‰¹å®šçš„ä»»å‹™ä¸¦æé«˜å·¥ä½œæ•ˆç‡ã€‚

## Acceptance Criteria

1. ä¸»é é¢é¡¯ç¤ºæœå°‹è¼¸å…¥æ¡†ï¼Œåœ¨ä»»å‹™åˆ—è¡¨ä¸Šæ–¹
2. ä½¿ç”¨è€…å¯ä»¥è¼¸å…¥é—œéµå­—å³æ™‚æœå°‹ä»»å‹™æè¿°
3. æœå°‹çµæœå³æ™‚æ›´æ–°ï¼Œç„¡éœ€æŒ‰ä¸‹ Enter æˆ–é»æ“ŠæŒ‰éˆ•
4. æœå°‹ä¸å€åˆ†å¤§å°å¯«ï¼Œæ”¯æ´éƒ¨åˆ†åŒ¹é…
5. æœå°‹æ¡†æœ‰æ˜é¡¯çš„æœå°‹åœ–ç¤ºå’Œ placeholder æ–‡å­—
6. æœå°‹æ™‚ä¿æŒç•¶å‰çš„æª¢è¦–ç‹€æ…‹ï¼ˆå¾…è¾¦/å·²å®Œæˆ/å…¨éƒ¨ï¼‰
7. æœå°‹çµæœä¸­åŒ¹é…çš„æ–‡å­—æ‡‰è©²é«˜äº®é¡¯ç¤º
8. ç•¶æœå°‹ç„¡çµæœæ™‚é¡¯ç¤ºã€Œæ‰¾ä¸åˆ°åŒ¹é…çš„ä»»å‹™ã€æç¤º
9. æ¸…ç©ºæœå°‹æ¡†æ™‚æ¢å¾©åŸå§‹çš„ä»»å‹™åˆ—è¡¨
10. æœå°‹åŠŸèƒ½æ‡‰è©²åœ¨ 300ms å…§å›æ‡‰ï¼ˆé˜²æŠ–å‹•æ©Ÿåˆ¶ï¼‰
11. æ”¯æ´éµç›¤å¿«æ·éµ Ctrl+F å¿«é€Ÿèšç„¦æœå°‹æ¡†
12. æœå°‹ç‹€æ…‹åœ¨é é¢é‡æ–°è¼‰å…¥å¾Œæ¸…ç©º

## Tasks / Subtasks

**âš¡ æ¥­å‹™åŠŸèƒ½ Story - å¿…é ˆéµå¾ª BDD é©…å‹•æµç¨‹**

### éšæ®µ 1: BDD å ´æ™¯å»ºç«‹ (Story ç¬¬ä¸€æ­¥)

- [ ] æ’°å¯«å®Œæ•´ BDD å ´æ™¯æ¶µè“‹æ‰€æœ‰æœå°‹åŠŸèƒ½æƒ…å¢ƒ (AC: 1-12)
- [ ] å ´æ™¯é©—è­‰ï¼šç¢ºä¿æ¶µè“‹ä¸»è¦ä½¿ç”¨æƒ…å¢ƒã€é‚Šç•Œæ¢ä»¶å’ŒéŒ¯èª¤æƒ…æ³
- [ ] å ´æ™¯å“è³ªæª¢æŸ¥ï¼šå…·é«”ã€å¯æ¸¬è©¦ã€èˆ‡åŠŸèƒ½éœ€æ±‚ä¸€è‡´

### éšæ®µ 2: æŠ€è¡“éœ€æ±‚æ¨å° (åŸºæ–¼ BDD å ´æ™¯)

- [ ] å¾ BDD å ´æ™¯æ¨å°å¾Œç«¯æŠ€è¡“éœ€æ±‚ (AC: 2, 4, 6, 10)
  - [ ] åˆ†æå ´æ™¯ä¸­çš„ API éœ€æ±‚ï¼šGET /api/tasks?search=keyword&status=filter
  - [ ] è¨­è¨ˆ GetTasksQuery æ“´å±•æ”¯æ´æœå°‹åƒæ•¸
  - [ ] è¨­è¨ˆæœå°‹é‚è¼¯å’Œè³‡æ–™åº«æŸ¥è©¢æœ€ä½³åŒ–
  - [ ] å®šç¾©é˜²æŠ–å‹•å’Œæ•ˆèƒ½è€ƒé‡
- [ ] å¾ BDD å ´æ™¯æ¨å°å‰ç«¯æŠ€è¡“éœ€æ±‚ (AC: 1, 3, 5, 7, 8, 11)
  - [ ] åˆ†æå ´æ™¯ä¸­çš„ UI å…ƒä»¶ï¼šæœå°‹è¼¸å…¥æ¡†ã€é«˜äº®é¡¯ç¤º
  - [ ] è¨­è¨ˆ TaskSearchComponent å…ƒä»¶åŸºæ–¼å ´æ™¯äº’å‹•
  - [ ] è¨­è¨ˆå³æ™‚æœå°‹å’Œé˜²æŠ–å‹•æ©Ÿåˆ¶
  - [ ] è¨­è¨ˆéµç›¤å¿«æ·éµå’Œç„¡éšœç¤™åŠŸèƒ½

### éšæ®µ 3: æ¸¬è©¦å…ˆè¡Œ (TDD + BDD)

- [ ] å»ºç«‹å¾Œç«¯ BDD æ¸¬è©¦ (Red Phase) (AC: 2, 4, 6, 10)
  - [ ] å»ºç«‹ TaskSearching.feature æ–‡ä»¶
  - [ ] å¯¦ä½œ TaskSearchingSteps.cs æ­¥é©Ÿå®šç¾©
  - [ ] é‹è¡Œæ¸¬è©¦ç¢ºèªå¤±æ•— (Red)
  - [ ] é©—è­‰æ¸¬è©¦è¦†è“‹æ‰€æœ‰æœå°‹å ´æ™¯
- [ ] å»ºç«‹å‰ç«¯ BDD æ¸¬è©¦ (Red Phase) (AC: 1, 3, 5, 7, 8, 11)
  - [ ] å»ºç«‹ task-searching.feature æ–‡ä»¶
  - [ ] å¯¦ä½œ task-searching.steps.ts æ­¥é©Ÿå®šç¾©
  - [ ] é‹è¡Œæ¸¬è©¦ç¢ºèªå¤±æ•— (Red)
  - [ ] é©—è­‰æ¸¬è©¦è¦†è“‹æ‰€æœ‰ UI äº’å‹•å ´æ™¯

### éšæ®µ 4: æœ€å°å¯¦ä½œ (Green Phase)

- [ ] å¯¦ä½œå¾Œç«¯æœå°‹åŠŸèƒ½ (ç¶ ç‡ˆæœ€å°å¯¦ä½œ) (AC: 2, 4, 6, 10)
  - [ ] æ“´å±• GetTasksQuery æ–°å¢ Search åƒæ•¸
  - [ ] å¯¦ä½œ GetTasksQueryHandler æœå°‹é‚è¼¯
  - [ ] æ›´æ–° TasksController GET ç«¯é»æ”¯æ´ search æŸ¥è©¢åƒæ•¸
  - [ ] å¯¦ä½œæœå°‹çš„è³‡æ–™åº«æŸ¥è©¢æœ€ä½³åŒ–
  - [ ] é‹è¡Œå¾Œç«¯ BDD æ¸¬è©¦ç¢ºèªé€šé (Green)
- [ ] å¯¦ä½œå‰ç«¯æœå°‹åŠŸèƒ½ (ç¶ ç‡ˆæœ€å°å¯¦ä½œ) (AC: 1, 3, 5, 7, 8, 11)
  - [ ] å»ºç«‹ TaskSearchComponent å…ƒä»¶åŸºç¤çµæ§‹
  - [ ] å¯¦ä½œæœå°‹è¼¸å…¥æ¡†å’Œå³æ™‚æœå°‹
  - [ ] å»ºç«‹ SearchService ç®¡ç†æœå°‹ç‹€æ…‹
  - [ ] å¯¦ä½œé˜²æŠ–å‹•æ©Ÿåˆ¶å’Œæ•ˆèƒ½æœ€ä½³åŒ–
  - [ ] å¯¦ä½œé«˜äº®é¡¯ç¤ºå’Œç©ºç‹€æ…‹è™•ç†
  - [ ] é‹è¡Œå‰ç«¯ BDD æ¸¬è©¦ç¢ºèªé€šé (Green)
- [ ] æ•´åˆå‰å¾Œç«¯æœå°‹åŠŸèƒ½ (AC: 9, 12)
  - [ ] æ“´å±• TaskService æ–°å¢æœå°‹æ–¹æ³•
  - [ ] å¯¦ä½œæœå°‹èˆ‡æª¢è¦–åˆ‡æ›çš„æ•´åˆ
  - [ ] å¯¦ä½œéµç›¤å¿«æ·éµåŠŸèƒ½
  - [ ] é‹è¡Œæ•´åˆæ¸¬è©¦ç¢ºèªæ‰€æœ‰å ´æ™¯é€šé

### éšæ®µ 5: é‡æ§‹å’Œå¢å¼· (Blue Phase)

- [ ] å„ªåŒ–ç”¨æˆ¶é«”é©—å’Œæ•ˆèƒ½ (AC: 7, 10, 11)
  - [ ] å¯¦ä½œæœå°‹çµæœé«˜äº®é¡¯ç¤ºæ•ˆæœ
  - [ ] å„ªåŒ–æœå°‹æ•ˆèƒ½å’Œè¨˜æ†¶é«”ä½¿ç”¨
  - [ ] å¯¦ä½œéµç›¤å°èˆªå’Œç„¡éšœç¤™åŠŸèƒ½
  - [ ] åŠ å…¥é€²éšæœå°‹åŠŸèƒ½ï¼ˆå¦‚æœéœ€è¦ï¼‰
- [ ] ç¨‹å¼ç¢¼é‡æ§‹å’Œæœ€ä½³åŒ–
  - [ ] é‡æ§‹é‡è¤‡ç¨‹å¼ç¢¼å’Œæ”¹å–„æ¶æ§‹
  - [ ] å„ªåŒ–æœå°‹æ¼”ç®—æ³•å’Œè³‡æ–™åº«æŸ¥è©¢
  - [ ] åŠ å¼·éŒ¯èª¤è™•ç†å’Œé‚Šç•Œæƒ…æ³
  - [ ] ç¢ºä¿ç¨‹å¼ç¢¼ç¬¦åˆå°ˆæ¡ˆç·¨ç¢¼æ¨™æº–

### éšæ®µ 6: å®Œæ•´é©—è­‰ (AC: 1-12)

- [ ] E2E BDD æ¸¬è©¦åŸ·è¡Œ
  - [ ] é‹è¡Œå®Œæ•´çš„æœå°‹åŠŸèƒ½ E2E æ¸¬è©¦
  - [ ] é©—è­‰è·¨ç€è¦½å™¨ç›¸å®¹æ€§
  - [ ] æ¸¬è©¦æ•ˆèƒ½å’Œæœå°‹å›æ‡‰æ™‚é–“
- [ ] å›æ­¸æ¸¬è©¦å’Œå“è³ªç¢ºä¿
  - [ ] ç¢ºèªä¸å½±éŸ¿ç¾æœ‰ Epic 2 å’Œ 3.1 åŠŸèƒ½
  - [ ] é‹è¡Œå®Œæ•´æ¸¬è©¦å¥—ä»¶
  - [ ] é©—è­‰æ‰€æœ‰é©—æ”¶æ¨™æº–é”æˆ

## Dev Notes

### ä¾è³´å‰ä¸€å€‹æ•…äº‹

æ­¤æ•…äº‹å»ºç«‹åœ¨ **Epic 2 å®Œæ•´å¯¦ä½œ** å’Œ **Story 3.1 æª¢è¦–åˆ‡æ›åŠŸèƒ½** çš„åŸºç¤ä¸Šï¼š

- éœ€è¦ TodoTask è³‡æ–™æ¨¡å‹å’Œ CRUD åŸºç¤åŠŸèƒ½ (Story 2.1-2.4)
- éœ€è¦åŸºæœ¬çš„ CQRS æ¶æ§‹å’Œ TasksController
- éœ€è¦å‰ç«¯ TaskService å’Œ TaskListComponent
- éœ€è¦ Angular Signals ç‹€æ…‹ç®¡ç†æ©Ÿåˆ¶
- éœ€è¦æª¢è¦–åˆ‡æ›åŠŸèƒ½ï¼ˆ3.1ï¼‰æ•´åˆ

### BDD æ¸¬è©¦å ´æ™¯æ¡†æ¶

æ­¤æ•…äº‹åŸºæ–¼ä»¥ä¸‹ BDD æ¸¬è©¦å ´æ™¯å¯¦ä½œï¼š

**ä¸»è¦æ¸¬è©¦å ´æ™¯ï¼š**

```gherkin
Feature: ä»»å‹™æœå°‹å’Œç¯©é¸
  As a ç”Ÿç”¢åŠ›ä½¿ç”¨è€…
  I want to æœå°‹å’Œç¯©é¸æˆ‘çš„ä»»å‹™
  So that æˆ‘å¯ä»¥å¿«é€Ÿæ‰¾åˆ°ç‰¹å®šçš„ä»»å‹™

Scenario: å³æ™‚æœå°‹ä»»å‹™
  Given æˆ‘æœ‰ä»¥ä¸‹ä»»å‹™ï¼š
    | ä»»å‹™æè¿°          | ç‹€æ…‹  |
    | é–‹ç™¼æœå°‹åŠŸèƒ½      | å¾…è¾¦  |
    | æ¸¬è©¦æœå°‹åŠŸèƒ½      | å¾…è¾¦  |
    | æ’°å¯«æœå°‹æ–‡ä»¶      | å·²å®Œæˆ |
    | é–‹ç™¼å…¶ä»–åŠŸèƒ½      | å¾…è¾¦  |
  When æˆ‘åœ¨æœå°‹æ¡†è¼¸å…¥ "æœå°‹"
  Then æˆ‘æ‡‰è©²çœ‹åˆ° 3 å€‹ä»»å‹™
  And æˆ‘æ‡‰è©²çœ‹åˆ°ä»»å‹™ "é–‹ç™¼æœå°‹åŠŸèƒ½"
  And æˆ‘æ‡‰è©²çœ‹åˆ°ä»»å‹™ "æ¸¬è©¦æœå°‹åŠŸèƒ½"
  And æˆ‘æ‡‰è©²çœ‹åˆ°ä»»å‹™ "æ’°å¯«æœå°‹æ–‡ä»¶"
  And æˆ‘ä¸æ‡‰è©²çœ‹åˆ°ä»»å‹™ "é–‹ç™¼å…¶ä»–åŠŸèƒ½"
  And åŒ¹é…çš„æ–‡å­—æ‡‰è©²è¢«é«˜äº®é¡¯ç¤º

Scenario: æœå°‹ä¸å€åˆ†å¤§å°å¯«
  Given æˆ‘æœ‰ä»»å‹™ "é–‹ç™¼æ–°åŠŸèƒ½"
  When æˆ‘åœ¨æœå°‹æ¡†è¼¸å…¥ "é–‹ç™¼"
  Then æˆ‘æ‡‰è©²çœ‹åˆ°ä»»å‹™ "é–‹ç™¼æ–°åŠŸèƒ½"
  When æˆ‘åœ¨æœå°‹æ¡†è¼¸å…¥ "é–‹ç™¼"
  Then æˆ‘æ‡‰è©²çœ‹åˆ°ä»»å‹™ "é–‹ç™¼æ–°åŠŸèƒ½"

Scenario: éƒ¨åˆ†åŒ¹é…æœå°‹
  Given æˆ‘æœ‰ä»»å‹™ "å®Œæˆå°ˆæ¡ˆå ±å‘Š"
  When æˆ‘åœ¨æœå°‹æ¡†è¼¸å…¥ "å°ˆæ¡ˆ"
  Then æˆ‘æ‡‰è©²çœ‹åˆ°ä»»å‹™ "å®Œæˆå°ˆæ¡ˆå ±å‘Š"
  When æˆ‘åœ¨æœå°‹æ¡†è¼¸å…¥ "å ±å‘Š"
  Then æˆ‘æ‡‰è©²çœ‹åˆ°ä»»å‹™ "å®Œæˆå°ˆæ¡ˆå ±å‘Š"

Scenario: æœå°‹çµåˆæª¢è¦–åˆ‡æ›
  Given æˆ‘æœ‰ä»¥ä¸‹ä»»å‹™ï¼š
    | ä»»å‹™æè¿°          | ç‹€æ…‹  |
    | é–‹ç™¼åŠŸèƒ½ A        | å¾…è¾¦  |
    | é–‹ç™¼åŠŸèƒ½ B        | å·²å®Œæˆ |
    | æ¸¬è©¦åŠŸèƒ½ A        | å¾…è¾¦  |
  And æˆ‘åœ¨ã€Œå¾…è¾¦ã€æª¢è¦–
  When æˆ‘åœ¨æœå°‹æ¡†è¼¸å…¥ "é–‹ç™¼"
  Then æˆ‘æ‡‰è©²çœ‹åˆ° 1 å€‹ä»»å‹™
  And æˆ‘æ‡‰è©²çœ‹åˆ°ä»»å‹™ "é–‹ç™¼åŠŸèƒ½ A"
  And æˆ‘ä¸æ‡‰è©²çœ‹åˆ°ä»»å‹™ "é–‹ç™¼åŠŸèƒ½ B"

Scenario: æ¸…ç©ºæœå°‹æ¡†æ¢å¾©åˆ—è¡¨
  Given æˆ‘æœ‰ 5 å€‹ä»»å‹™
  And æˆ‘åœ¨æœå°‹æ¡†è¼¸å…¥ "ç‰¹å®š"
  And æœå°‹çµæœé¡¯ç¤º 1 å€‹ä»»å‹™
  When æˆ‘æ¸…ç©ºæœå°‹æ¡†
  Then æˆ‘æ‡‰è©²çœ‹åˆ° 5 å€‹ä»»å‹™

Scenario: æœå°‹ç„¡çµæœ
  Given æˆ‘æœ‰ä»»å‹™ "é–‹ç™¼åŠŸèƒ½"
  When æˆ‘åœ¨æœå°‹æ¡†è¼¸å…¥ "ä¸å­˜åœ¨çš„ä»»å‹™"
  Then æˆ‘æ‡‰è©²çœ‹åˆ° "æ‰¾ä¸åˆ°åŒ¹é…çš„ä»»å‹™" æç¤º
  And æˆ‘ä¸æ‡‰è©²çœ‹åˆ°ä»»ä½•ä»»å‹™

Scenario: éµç›¤å¿«æ·éµ
  Given æˆ‘åœ¨ä»»å‹™é é¢
  When æˆ‘æŒ‰ä¸‹ Ctrl+F
  Then æœå°‹æ¡†æ‡‰è©²ç²å¾—ç„¦é»

Scenario: æœå°‹æ•ˆèƒ½å’Œé˜²æŠ–å‹•
  Given æˆ‘æœ‰ 100 å€‹ä»»å‹™
  When æˆ‘å¿«é€Ÿè¼¸å…¥ "test"
  Then æœå°‹æ‡‰è©²åœ¨ 300ms å…§å®Œæˆ
  And ä¸æ‡‰è©²ç™¼é€å¤šå€‹ API è«‹æ±‚
```

### æ¶æ§‹è¨­è¨ˆè€ƒé‡ [Source: architecture.md]

**å¾Œç«¯ API æ“´å±•ï¼š**

```csharp
public class GetTasksQuery : IRequest<List<TaskDto>>
{
    public TaskStatus? Status { get; set; } // ä¿æŒç¾æœ‰ç¯©é¸åŠŸèƒ½
    public string? Search { get; set; } // æ–°å¢æœå°‹åƒæ•¸
}

public class GetTasksQueryHandler : IRequestHandler<GetTasksQuery, List<TaskDto>>
{
    public async Task<List<TaskDto>> Handle(GetTasksQuery request, CancellationToken cancellationToken)
    {
        var query = _context.Tasks.AsQueryable();

        // ç‹€æ…‹ç¯©é¸ï¼ˆä¾†è‡ª 3.1ï¼‰
        if (request.Status.HasValue)
        {
            query = query.Where(t => t.IsCompleted == request.Status.Value);
        }

        // æœå°‹åŠŸèƒ½ï¼ˆæ–°å¢ï¼‰
        if (!string.IsNullOrWhiteSpace(request.Search))
        {
            query = query.Where(t => EF.Functions.Like(t.Description.ToLower(), 
                $"%{request.Search.ToLower()}%"));
        }

        return await query
            .OrderBy(t => t.CreatedAt)
            .Select(t => t.ToDto())
            .ToListAsync(cancellationToken);
    }
}
```

**API ç«¯é»æ›´æ–°ï¼š**

- ç¾æœ‰ç«¯é»ï¼š`GET /api/tasks?status=todo|completed|all`
- æ“´å±•æ”¯æ´ï¼š`GET /api/tasks?status=todo&search=keyword`
- å›æ‡‰æ ¼å¼ä¿æŒä¸€è‡´ï¼Œæ”¯æ´åŒæ™‚ç¯©é¸å’Œæœå°‹

**å‰ç«¯æ¶æ§‹è¨­è¨ˆï¼š**

```typescript
// æœå°‹æœå‹™
@Injectable({ providedIn: "root" })
export class SearchService {
  private searchTerm = signal<string>('');
  private searchResults = signal<Task[]>([]);

  constructor(private taskService: TaskService) {}

  search(term: string): void {
    this.searchTerm.set(term);
    
    // é˜²æŠ–å‹•è™•ç†
    if (this.searchDebounce) {
      clearTimeout(this.searchDebounce);
    }
    
    this.searchDebounce = setTimeout(() => {
      this.performSearch(term);
    }, 300);
  }

  private async performSearch(term: string): Promise<void> {
    if (!term.trim()) {
      this.searchResults.set([]);
      return;
    }

    const results = await this.taskService.searchTasks(term);
    this.searchResults.set(results);
  }

  clearSearch(): void {
    this.searchTerm.set('');
    this.searchResults.set([]);
  }

  getSearchTerm(): string {
    return this.searchTerm();
  }

  getSearchResults(): Task[] {
    return this.searchResults();
  }
}

// TaskService æ“´å±•
export class TaskService {
  async searchTasks(searchTerm: string, status?: TaskViewType): Promise<Task[]> {
    const params: any = {};
    
    if (searchTerm.trim()) {
      params.search = searchTerm;
    }
    
    if (status && status !== TaskViewType.ALL) {
      params.status = status === TaskViewType.TODO ? "todo" : "completed";
    }

    return this.http.get<Task[]>("/api/tasks", { params }).toPromise();
  }
}
```

### å‰ç«¯å…ƒä»¶è¨­è¨ˆ [Source: architecture.md]

**TaskSearchComponent å…ƒä»¶çµæ§‹ï¼š**

```typescript
@Component({
  selector: "app-task-search",
  template: `
    <div class="search-container">
      <div class="search-input-wrapper">
        <i class="search-icon" aria-hidden="true">ğŸ”</i>
        <input
          type="text"
          class="search-input"
          placeholder="æœå°‹ä»»å‹™..."
          [value]="searchTerm()"
          (input)="onSearchInput($event)"
          (keydown)="onKeyDown($event)"
          [attr.data-testid]="'search-input'"
          #searchInput
        />
        <button
          *ngIf="searchTerm()"
          class="clear-search"
          (click)="clearSearch()"
          [attr.data-testid]="'clear-search'"
          aria-label="æ¸…é™¤æœå°‹"
        >
          âœ•
        </button>
      </div>
    </div>
  `,
})
export class TaskSearchComponent {
  searchTerm = this.searchService.getSearchTerm;
  
  constructor(
    private searchService: SearchService,
    private keyboardService: KeyboardService
  ) {}

  ngOnInit() {
    // è¨»å†Šéµç›¤å¿«æ·éµ Ctrl+F
    this.keyboardService.registerShortcut('ctrl+f', () => {
      this.focusSearchInput();
    });
  }

  onSearchInput(event: Event): void {
    const input = event.target as HTMLInputElement;
    this.searchService.search(input.value);
  }

  clearSearch(): void {
    this.searchService.clearSearch();
  }

  focusSearchInput(): void {
    const input = document.querySelector('[data-testid="search-input"]') as HTMLInputElement;
    if (input) {
      input.focus();
    }
  }

  onKeyDown(event: KeyboardEvent): void {
    if (event.key === 'Escape') {
      this.clearSearch();
    }
  }
}
```

**ä»»å‹™é«˜äº®é¡¯ç¤ºå…ƒä»¶ï¼š**

```typescript
@Component({
  selector: "app-task-highlight",
  template: `
    <span [innerHTML]="highlightedText()"></span>
  `,
})
export class TaskHighlightComponent {
  @Input() text: string = '';
  @Input() searchTerm: string = '';

  highlightedText = computed(() => {
    if (!this.searchTerm || !this.text) {
      return this.text;
    }

    const regex = new RegExp(`(${this.escapeRegex(this.searchTerm)})`, 'gi');
    return this.text.replace(regex, '<mark class="search-highlight">$1</mark>');
  });

  private escapeRegex(term: string): string {
    return term.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
  }
}
```

### CSS è¨­è¨ˆè¦ç¯„

**æœå°‹å…ƒä»¶æ¨£å¼ï¼š**

```scss
.search-container {
  margin-bottom: 16px;
  
  .search-input-wrapper {
    position: relative;
    display: flex;
    align-items: center;
    border: 1px solid #e5e7eb;
    border-radius: 8px;
    background: white;
    padding: 8px 12px;
    
    &:focus-within {
      border-color: #3b82f6;
      box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
    }

    .search-icon {
      color: #6b7280;
      margin-right: 8px;
    }

    .search-input {
      flex: 1;
      border: none;
      outline: none;
      font-size: 14px;
      
      &::placeholder {
        color: #9ca3af;
      }
    }

    .clear-search {
      background: none;
      border: none;
      color: #6b7280;
      cursor: pointer;
      padding: 4px;
      
      &:hover {
        color: #374151;
      }
    }
  }
}

.search-highlight {
  background-color: #fef08a;
  color: #713f12;
  font-weight: 500;
  padding: 1px 2px;
  border-radius: 2px;
}

.no-results {
  text-align: center;
  color: #6b7280;
  padding: 32px 16px;
  
  .no-results-icon {
    font-size: 48px;
    margin-bottom: 16px;
    opacity: 0.5;
  }
  
  .no-results-text {
    font-size: 16px;
    margin-bottom: 8px;
  }
  
  .no-results-suggestion {
    font-size: 14px;
    color: #9ca3af;
  }
}
```

### æ¸¬è©¦è¦æ±‚ [Source: bdd-testing-strategy.md]

**å‰ç«¯ BDD æ¸¬è©¦ï¼š**

- æ¸¬è©¦æª”æ¡ˆï¼š`tests/frontend-bdd/features/task-searching.feature`
- æ­¥é©Ÿå®šç¾©ï¼š`tests/frontend-bdd/step_definitions/task-searching.steps.ts`
- é‡é»æ¸¬è©¦ï¼šå³æ™‚æœå°‹ã€é«˜äº®é¡¯ç¤ºã€é˜²æŠ–å‹•ã€éµç›¤å¿«æ·éµ

**å¾Œç«¯ BDD æ¸¬è©¦ï¼š**

- æ¸¬è©¦æª”æ¡ˆï¼š`tests/backend-bdd/Features/TaskSearching.feature`
- æ­¥é©Ÿå®šç¾©ï¼š`tests/backend-bdd/StepDefinitions/TaskSearchingSteps.cs`
- é‡é»æ¸¬è©¦ï¼šæœå°‹APIã€æŸ¥è©¢åƒæ•¸ã€æ•ˆèƒ½ã€æ¨¡ç³ŠåŒ¹é…

**E2E BDD æ¸¬è©¦ï¼š**

- å®Œæ•´æœå°‹æµç¨‹æ¸¬è©¦
- æœå°‹èˆ‡æª¢è¦–åˆ‡æ›æ•´åˆæ¸¬è©¦
- éµç›¤å¿«æ·éµå’Œç„¡éšœç¤™åŠŸèƒ½æ¸¬è©¦

### æ•ˆèƒ½è€ƒé‡

**å‰ç«¯æ•ˆèƒ½ï¼š**

- é˜²æŠ–å‹•æ©Ÿåˆ¶é¿å…éåº¦ API å‘¼å«
- è™›æ“¬æ»¾å‹•è™•ç†å¤§é‡æœå°‹çµæœ
- æœå°‹çµæœå¿«å–å’Œè¨˜æ†¶åŒ–
- é«˜äº®é¡¯ç¤ºæ¼”ç®—æ³•æœ€ä½³åŒ–

**å¾Œç«¯æ•ˆèƒ½ï¼š**

- è³‡æ–™åº«å…¨æ–‡æª¢ç´¢ç´¢å¼•ï¼ˆå¦‚æœéœ€è¦ï¼‰
- æœå°‹æŸ¥è©¢æœ€ä½³åŒ–å’Œåˆ†é 
- API å›æ‡‰æ™‚é–“ç›£æ§ï¼ˆç›®æ¨™ < 300msï¼‰

### Testing

**æ¸¬è©¦æ¨™æº–ï¼š** [Source: bdd-testing-strategy.md]

- å‰ç«¯æ¸¬è©¦ï¼šJasmine + Karma (Angular é è¨­)
- å¾Œç«¯æ¸¬è©¦ï¼šxUnit (.NET æ¨™æº–æ¸¬è©¦æ¡†æ¶)
- BDD æ¸¬è©¦ï¼šSpecFlow (å¾Œç«¯) + Cucumber (å‰ç«¯)
- E2E æ¸¬è©¦ï¼šSpecFlow + Selenium WebDriver

**æ­¤æ•…äº‹çš„ç‰¹å®šæ¸¬è©¦éœ€æ±‚ï¼š**

- æœå°‹è¼¸å…¥å’Œå³æ™‚å›æ‡‰æ¸¬è©¦
- API æœå°‹åƒæ•¸å’ŒæŸ¥è©¢æ¸¬è©¦
- é«˜äº®é¡¯ç¤ºæ­£ç¢ºæ€§æ¸¬è©¦
- é˜²æŠ–å‹•æ©Ÿåˆ¶æ•ˆèƒ½æ¸¬è©¦
- éµç›¤å¿«æ·éµåŠŸèƒ½æ¸¬è©¦
- ç„¡éšœç¤™åŠŸèƒ½ç›¸å®¹æ€§æ¸¬è©¦

## Change Log

| Date       | Version | Description                                   | Author       |
| ---------- | ------- | --------------------------------------------- | ------------ |
| 2025-08-21 | 1.0     | åˆå§‹æ•…äº‹å»ºç«‹ï¼ŒåŒ…å«å®Œæ•´ BDD å ´æ™¯æ¡†æ¶å’Œå¯¦ä½œæŒ‡å° | Scrum Master |

## Dev Agent Record

### Agent Model Used

_å¾…é–‹ç™¼ä»£ç†å¡«å¯«_

### Debug Log References

_å¾…é–‹ç™¼ä»£ç†å¡«å¯«_

### Completion Notes List

_å¾…é–‹ç™¼ä»£ç†å¡«å¯«_

### File List

_å¾…é–‹ç™¼ä»£ç†å¡«å¯«_

## QA Results

_å¾… QA ä»£ç†å¡«å¯«_